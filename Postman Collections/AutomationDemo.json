{
  "info": {
    "_postman_id": "92eef5dc-be9f-fa01-5a96-7238826117c8",
    "name": "AutomationDemo v2",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "0e8adeb6-8b31-822c-82cd-67de09b4971c",
      "name": "Login API",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "",
              "tests[\"Body contains token\"] = responseBody.has(\"token\");",
              "",
              "var jsonData = JSON.parse(responseBody);",
              "",
              "postman.setEnvironmentVariable(\"minerva_token\", jsonData.token);",
              "",
              "",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"username\": \"{{minerva_user}}\",\n    \"password\": \"{{minerva_user_password}}\"\n}"
        },
        "url": "{{minerva_base_url}}/minerva/api/login"
      },
      "response": []
    },
    {
      "_postman_id": "10f0aaf3-3f13-9ca8-6e57-0418382ecdb5",
      "name": "Get User Details",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "",
              "var responseJson = JSON.parse(responseBody);",
              "",
              "",
              "tests[\"authorities length > 0\"] = responseJson.authorities.length > 0;",
              "",
              "tests[\"userGroups length > 0\"] = responseJson.userGroups.length > 0;",
              "",
              "tests[\"menuItems length > 0\"] = responseJson.menuItems.length > 0;",
              "",
              "",
              "",
              "",
              "",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-auth-token",
            "value": "{{minerva_token}}"
          },
          {
            "key": "api-info",
            "value": "{{api-info}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "\n\n\n\n"
        },
        "url": "{{minerva_base_url}}/minerva/moUser/getUserDetails"
      },
      "response": []
    },
    {
      "_postman_id": "b09c5b49-432a-73db-7ebe-47d75ccfb553",
      "name": "Config List",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-auth-token",
            "value": "{{minerva_token}}"
          },
          {
            "key": "api-info",
            "value": "{{api-info}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": ""
        },
        "url": "{{minerva_base_url}}/minerva/user/renderConfigList"
      },
      "response": []
    },
    {
      "_postman_id": "6b705b32-30b7-de9c-09a0-365157fc8198",
      "name": "Search User",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "if(responseCode.code===200){",
              "var responseJson = JSON.parse(responseBody);",
              "tests['User list size>0'] =  responseJson.resultList.length > 0;",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-auth-token",
            "value": "{{minerva_token}}"
          },
          {
            "key": "api-info",
            "value": "{{api-info}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"searchString\":\"sys_admin\",\"_skip\":0,\"random\":\"659.0255687674851\",\"includeAnonymous\":true}"
        },
        "url": "{{minerva_base_url}}/minerva/moUser/search/"
      },
      "response": []
    },
    {
      "_postman_id": "6b23392b-d9a6-ea33-7762-37b5e19f762f",
      "name": "Logout User",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "x-auth-token",
            "value": "{{minerva_token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{}"
        },
        "url": "{{minerva_base_url}}/minerva/api/logout"
      },
      "response": []
    },
    {
      "_postman_id": "3d3fd70a-656e-406c-869c-a0e998386c27",
      "name": "Create Patient Mainline",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "f3ab3506-8f19-47b8-bdbd-0f66a7f93116",
            "type": "text/javascript",
            "exec": [
              "tests[\"Patient Created Successfully\"] = responseCode.code === 200;",
              "var responseJson = JSON.parse(responseBody);",
              "if(responseJson.patient){",
              "postman.setGlobalVariable(\"patient_id\", responseJson.patient.id);",
              "}",
              ""
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "x-auth-token",
            "value": "{{minerva_token}}"
          },
          {
            "key": "api-info",
            "value": "{{api-info}}"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"firstName\": \"Pratyush\",\n  \"middleName\": \"Bansal\",\n  \"lastName\": \"Test\",\n  \"dob\": \"2016-07-04T00:00:00.000Z\",\n  \"gender\": \"M\",\n  \"address\": [\n    {\n      \"useCode\": \"Home\",\n      \"country\": \"India\",\n      \"state\": \"Delhi\",\n      \"city\": \"New Delhi\",\n      \"line1\": \"A-sddjs\",\n      \"line2\": \"sadsdas\",\n      \"zipcode\": \"110001\"\n    }\n  ],\n  \"contact\": [\n    {\n      \"relationship\": [\n        \"Mother\"\n      ],\n      \"firstName\": \"Tester\",\n      \"phoneValue\": \"8888888888\",\n      \"emailValue\": \"qwert@gmail.com\",\n      \"countryCode\": \"+91\"\n    },\n    {\n      \"firstName\": \"Tester2\",\n      \"relationship\": [\n        \"Father\"\n      ],\n      \"phoneValue\": \"7777777777\",\n      \"emailValue\": \"tyuio@gmaiil.com\",\n      \"countryCode\": \"+91\"\n    }\n  ],\n  \"identifier\": [\n    {\n      \"value\": \"5555\",\n      \"assigningAuthority\": \"Minerva\",\n      \"typeCode\": \"MR\"\n    }\n  ],\n  \"email\": [\n    {\n      \"value\": \"pbansal@mphrx.com\"\n    }\n  ],\n  \"phone\": [\n    {\n      \"countryCode\": \"+91\",\n      \"value\": \"9810052808\"\n    },\n    {\n      \"countryCode\": \"+91\",\n      \"value\": \"9999999999\"\n    }\n  ]\n}"
        },
        "url": "{{minerva_base_url}}/minerva/MoPatient/savePatient"
      },
      "response": []
    }
  ]
}